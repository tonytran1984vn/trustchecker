# Prometheus configuration for TrustChecker platform
# Scrapes metrics from Node.js app and all Python microservices

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  scrape_timeout: 10s

rule_files:
  - "alert-rules.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets: ["alertmanager:9093"]

scrape_configs:
  # ─── Node.js Application ──────────────────────────────────────
  - job_name: "trustchecker-app"
    static_configs:
      - targets: ["app:4000"]
    metrics_path: "/metrics"
    scrape_interval: 10s

  # ─── AI Simulation Service (Monte Carlo, Digital Twin, etc.) ──
  - job_name: "ai-simulation"
    static_configs:
      - targets: ["ai-simulation:5001"]
    metrics_path: "/metrics"

  # ─── AI Detection Service (Fraud, Anomaly, Risk Radar) ────────
  - job_name: "ai-detection"
    static_configs:
      - targets: ["ai-detection:5002"]
    metrics_path: "/metrics"

  # ─── AI Analytics Service (Carbon, SCM, Demand Sensing) ───────
  - job_name: "ai-analytics"
    static_configs:
      - targets: ["ai-analytics:5003"]
    metrics_path: "/metrics"

  # ─── Redis Exporter ───────────────────────────────────────────
  - job_name: "redis"
    static_configs:
      - targets: ["redis-exporter:9121"]

  # ─── Node Exporter (Host Metrics) ─────────────────────────────
  - job_name: "node-exporter"
    static_configs:
      - targets: ["node-exporter:9100"]

  # ─── Prometheus self-monitoring ───────────────────────────────
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]
